--- Libnet-latest/src/Makefile.am.orig	Tue Aug  6 00:26:03 2002
+++ Libnet-latest/src/Makefile.am	Mon Mar 17 10:57:14 2003
@@ -8,9 +8,9 @@
 
 include $(top_srcdir)/Makefile.am.common
 
-lib_LIBRARIES = libnet.a
+lib_LTLIBRARIES = libnet.la
 
-libnet_a_SOURCES = libnet_asn1.c \
+libnet_la_SOURCES = libnet_asn1.c \
 			libnet_build_802.1q.c \
 			libnet_build_802.2.c \
 			libnet_build_802.3.c \
@@ -48,4 +48,5 @@
 			libnet_version.c \
 			libnet_write.c
 
-libnet_a_LIBADD = @LIBOBJS@
+libnet_la_LIBADD = @LIBOBJS@
+libnet_la_LDFLAGS = -version-info 2:0:0
--- Libnet-latest/configure.in.orig	Tue Aug  6 00:26:03 2002
+++ Libnet-latest/configure.in	Mon Mar 17 10:59:42 2003
@@ -20,7 +20,7 @@
 dnl
 AC_PROG_CC
 AC_PROG_INSTALL
-AC_PROG_RANLIB
+AC_PROG_LIBTOOL
 
 AC_CHECK_HEADERS(sys/sockio.h)
 
@@ -34,7 +34,6 @@
 
 AC_SUBST(ENDIANESS)
 AC_SUBST(LIBNET_VERSION)
-AC_SUBST(LIBOBJS)
 AC_SUBST(HAVE_PACKET_SOCKET)
 AC_SUBST(ADDITIONAL_LIBS)
 AC_SUBST(LIBNET_CONFIG_DEFINES)
@@ -68,39 +67,39 @@
 AC_MSG_CHECKING(link-layer packet interface type)
 
 if test -r /dev/bpf0 ; then
-    LIBOBJS="$LIBOBJS libnet_link_bpf.o"
+    AC_LIBOBJ([libnet_link_bpf])
     AC_MSG_RESULT(found bpf)
 elif test -r /usr/include/net/pfilt.h ; then
-    LIBOBJS="$LIBOBJS libnet_link_pf.o"
+    AC_LIBOBJ([libnet_link_pf])
     AC_MSG_RESULT(found pf)
 elif test -r /dev/nit ; then
-    LIBOBJS="$LIBOBJS libnet_link_snit.o"
+    AC_LIBOBJ([libnet_link_snit])
     AC_MSG_RESULT(found snit)
 elif test -r /usr/include/sys/net/nit.h ; then
-    LIBOBJS="$LIBOBJS libnet_link_nit.o"
+    AC_LIBOBJ([libnet_link_nit])
     AC_MSG_RESULT(found nit)
 elif test -r /usr/include/net/raw.h ; then
-    LIBOBJS="$LIBOBJS libnet_link_snoop.o"
+    AC_LIBOBJ([libnet_link_snoop])
     AC_MSG_RESULT(found snoop)
 elif test -r /usr/include/sys/dlpi.h ; then
-    LIBOBJS="$LIBOBJS libnet_link_dlpi.o"
+    AC_LIBOBJ([libnet_link_dlpi])
     AC_MSG_RESULT(found dlpi)
     AC_DEFINE(HAVE_DLPI)
 elif test -r /usr/include/linux/socket.h ; then
-    LIBOBJS="$LIBOBJS libnet_link_linux.o"
+    AC_LIBOBJ([libnet_link_linux])
     AC_MSG_RESULT(found linux primitives)
     AC_LIBNET_CHECK_PF_PACKET
 elif test -c /dev/bpf0 ; then           # check again in case not readable
-    LIBOBJS="$LIBOBJS libnet_link_bpf.o"
+    AC_LIBOBJ([libnet_link_bpf])
     AC_MSG_RESULT(found bpf)
 elif test -c /dev/nit ; then            # check again in case not readable
-    LIBOBJS="$LIBOBJS libnet_link_snit.o"
+    AC_LIBOBJ([libnet_link_snit])
     AC_MSG_RESULT(found snit)
 elif test "$target_os" = "cygwin" ; then
-     LIBOBJS="$LIBOBJS libnet_link_win32.o"
+     AC_LIBOBJ([libnet_link_win32])
      AC_MSG_RESULT(found win32 wpcap)
 else
-    LIBOBJS="$LIBOBJS libnet_link_none.o"
+    AC_LIBOBJ([libnet_link_none])
     AC_MSG_WARN(could not find a link-layer packet interface)
     AC_MSG_WARN(link-layer packet injection will not be available)
 fi
--- Libnet-latest/sample/Makefile.am.orig	Tue Aug  6 00:26:04 2002
+++ Libnet-latest/sample/Makefile.am	Mon Mar 17 11:05:48 2003
@@ -33,4 +33,4 @@
 icmp6_echoreq_SOURCES   = icmp6_echoreq.c
 synflood6_SOURCES       = synflood6.c
 
-LDADD = $(top_srcdir)/src/libnet.a
+LDADD = $(top_srcdir)/src/libnet.la
